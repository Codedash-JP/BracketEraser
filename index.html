<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡å­—åˆ—ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f9;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .action-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        button {
            flex-grow: 1; /* å‡ç­‰ãªå¹…ã«åºƒãŒã‚‹ã‚ˆã†ã«è¨­å®š */
            padding: 10px;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        #cleanButton {
            background-color: #5cb85c;
        }
        #cleanButton:hover {
            background-color: #4cae4c;
        }
        #copyButton {
            background-color: #007bff;
        }
        #copyButton:hover {
            background-color: #0056b3;
        }
        .result-box {
            position: relative;
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 16px;
            word-wrap: break-word;
            white-space: pre-wrap;
            min-height: 40px; /* çµæœãŒè¦‹ã‚„ã™ã„ã‚ˆã†ã«æœ€å°ã®é«˜ã•ã‚’ç¢ºä¿ */
        }
        .copy-message {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #ffc107;
            color: #333;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.5s;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>è§’æ‹¬å¼§ã¨ä¸­èº«ã‚’æ¶ˆã™ã‚¢ãƒ—ãƒª</h1>

    <p>ğŸ‘‡ **å…¥åŠ›ã‚¨ãƒªã‚¢:** [ ]ã§å›²ã¾ã‚ŒãŸéƒ¨åˆ†ã‚’å‰Šé™¤ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
    <textarea id="inputText" placeholder="ä¾‹: ã“ã‚“ã«ã¡ã¯ã€[å‰Šé™¤å¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆ]ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã§ã™ã€‚"></textarea>

    <div class="action-group">
        <button id="cleanButton" onclick="cleanText()">âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿè¡Œ</button>
        <button id="copyButton" onclick="copyResult()">ğŸ“‹ çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>

    <p>âœ¨ **çµæœã‚¨ãƒªã‚¢:** ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p>
    <div id="resultText" class="result-box">
        <span id="copyMessage" class="copy-message">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
    </div>
</div>

<script>
/**
 * å…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è§’æ‹¬å¼§ï¼ˆ[]ï¼‰ã¨ãã®ä¸­èº«ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°
 */
function cleanText() {
    // å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
    const inputTextarea = document.getElementById('inputText');
    const inputString = inputTextarea.value;

    // æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦è§’æ‹¬å¼§ã¨ä¸­èº«ã‚’å‰Šé™¤
    // \[.*?\] ã¯è§’æ‹¬å¼§ã¨ãã®ä¸­èº«ã‚’æœ€çŸ­ä¸€è‡´ã§è¡¨ã—ã¾ã™ã€‚
    const cleanedString = inputString.replace(/\[.*?\]/g, '');

    // çµæœã‚’å‡ºåŠ›ã‚¨ãƒªã‚¢ã«è¡¨ç¤º
    const resultDiv = document.getElementById('resultText');
    // çµæœã‚’å‡ºåŠ›ã‚¨ãƒªã‚¢ã«è¡¨ç¤ºï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é™¤ãï¼‰
    resultDiv.textContent = cleanedString; 

    // ã‚³ãƒ”ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ ã‚’çµæœDivã«æˆ»ã™ï¼ˆtextContentã§ä¸Šæ›¸ãã•ã‚ŒãŸå ´åˆã®ãŸã‚ï¼‰
    const message = document.getElementById('copyMessage');
    if (!resultDiv.contains(message)) {
        resultDiv.appendChild(message);
    }
}

/**
 * çµæœã‚¨ãƒªã‚¢ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°
 */
function copyResult() {
    const resultDiv = document.getElementById('resultText');
    const textToCopy = resultDiv.textContent.trim();
    const copyMessage = document.getElementById('copyMessage');

    if (textToCopy === "" || textToCopy === "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼") {
        alert("ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
        return;
    }

    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰APIã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ”ãƒ¼ã‚’å®Ÿè¡Œ
    navigator.clipboard.writeText(textToCopy).then(() => {
        // æˆåŠŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        console.log('Text copied to clipboard successfully!');
        
        // ã€Œã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        copyMessage.style.opacity = 1;
        
        // 1.5ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«ã™ã‚‹
        setTimeout(() => {
            copyMessage.style.opacity = 0;
        }, 1500);

    }).catch(err => {
        // å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
        console.error('Could not copy text: ', err);
        alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
    });
}
</script>

</body>
</html>